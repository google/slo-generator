service_name: productsearch
feature_name: search_by_image
slo_name: latency
slo_description: 99.5% of POST requests to /v1/product/search_by_image has latency of less than 1s
slo_target: 0.995
backend:
  class: Prometheus
  method: query_sli
  url: http://kube-prometheus-prometheus.kube-monitor:9090
  measurement:
    expression: >
      sum(rate(request_duration_milliseconds_bucket{service="product-search", method="POST", uri="/v1/product/search_by_image", le="1000.0"}[window]))
      /
      sum(rate(request_duration_milliseconds_bucket{service="product-search", method="POST", uri="/v1/product/search_by_image", le="+Inf"}[window]))
      OR on() vector(1)
exporters:
  - class: custom.custom_exporter.PrometheusExporter
