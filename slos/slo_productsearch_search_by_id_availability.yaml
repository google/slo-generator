service_name: productsearch
feature_name: search_by_id
slo_name: availablility
slo_description: 99.5% of POST requests to /v1/product/search_by_id/{productId} return a non-5xx HTTP status code
slo_target: 0.995
backend:
  class: Prometheus
  method: query_sli
  url: http://kube-prometheus-prometheus.kube-monitor:9090
  measurement:
    expression: >
      sum(rate(response_http_status_total{service="product-search", method="POST", uri="/v1/product/search_by_id/{productId}", http_status!~"5.*"}[window]))
      /
      sum(rate(response_http_status_total{service="product-search", method="POST", uri="/v1/product/search_by_id/{productId}", http_status!~"5.*"}[window]))
      OR on() vector(1)
exporters:
  - class: custom.custom_exporter.PrometheusExporter
